View(name_nodes)
email_nodes <- html_nodes(page, ".grpl-contact") %>%  extract()
View(email_nodes)
extract <- function(x){
worker <- function(x){
ifelse(
is.null(html_node(x, xpath="a")),
"NA",
html_node(x, xpath="a")
)
}
unlist(lapply(x, worker))
}
email_nodes <- html_nodes(page, ".grpl-contact") %>%  extract()
View(email_nodes)
email_text <- html_text(email_node)
email_nodes <- html_nodes(page, ".grpl-contact") %>%  extract()
email_text <- html_text(email_nodes)
email_nodes <- html_nodes(page, ".grpl-contact") %>%  extract()
email_text <- html_text(email_nodes)
df <- left_join(df, data.frame(matrix(unlist(email_text)), stringsAsFactors = FALSE) %>% mutate(id = row_number()))
View(email_nodes)
View(email_nodes)
View(email_nodes)
View(email_nodes)
View(email_nodes)
email_nodes <- html_nodes(page, ".grpl-contact") %>%  extract()
View(email_nodes)
email_nodes <- html_nodes(page, ".grpl-contact")
View(email_nodes)
View(email_nodes)
df <- page %>%
html_nodes('grpl') %>%
map_df(~list(title = html_nodes(".grpl-name a") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
length = html_nodes(".grpl-purpose") %>%
html_text() %>%
{if(length(.) == 0) NA else .} %>%
length = html_nodes(".grpl-contact a") %>%
html_text() %>%
{if(length(.) == 0) NA else .}))
df <- page %>%
html_nodes('grpl') %>%
map_df(~list(title = html_nodes(".grpl-name a") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
length = html_nodes(".grpl-purpose") %>%
html_text() %>%
{if(length(.) == 0) NA else .}, %>%
length = html_nodes(".grpl-contact a") %>%
html_text() %>%
{if(length(.) == 0) NA else .}))
df <- page %>%
html_nodes('grpl') %>%
map_df(~list(title = html_nodes(".grpl-name a") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
desc = html_nodes(".grpl-purpose") %>%
html_text() %>%
{if(length(.) == 0) NA else .}, %>%
email = html_nodes(".grpl-contact a") %>%
html_text() %>%
{if(length(.) == 0) NA else .}))
df <- page %>%
html_nodes('grpl') %>%
map_df(~list(title = html_nodes(".grpl-name a") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
desc = html_nodes(".grpl-purpose") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
email = html_nodes(".grpl-contact a") %>%
html_text() %>%
{if(length(.) == 0) NA else .}))
View(df)
df <- page %>%
html_nodes('grpl') %>%
map_df(~list(title = html_nodes(".grpl-name a") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
desc = html_nodes(".grpl-purpose") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
email = html_nodes(".grpl-contact a") %>%
html_text() %>%
{if(length(.) == 0) NA else .}))
View(df)
df <- page %>%
html_nodes('grpl') %>%
map_df(~list(title = html_nodes(.x, ".grpl-name a") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
desc = html_nodes(.x, ".grpl-purpose") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
email = html_nodes(.x, ".grpl-contact a") %>%
html_text() %>%
{if(length(.) == 0) NA else .}))
df <- page %>%
html_nodes('grpl') %>%
map_df(~list(title = html_nodes(.x, ".grpl-name a") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
desc = html_nodes(.x, ".grpl-purpose") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
email = html_nodes(.x, ".grpl-contact a") %>%
html_text() %>%
{if(length(.) == 0) NA else .}))
df <- page %>%
#html_nodes('grpl') %>%
map_df(~list(title = html_nodes(.x, ".grpl-name a") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
desc = html_nodes(.x, ".grpl-purpose") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
email = html_nodes(.x, ".grpl-contact a") %>%
html_text() %>%
{if(length(.) == 0) NA else .}))
df <- page %>%
html_nodes('grpl-info') %>%
map_df(~list(title = html_nodes(.x, ".grpl-name a") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
desc = html_nodes(.x, ".grpl-purpose") %>%
html_text() %>%
{if(length(.) == 0) NA else .},
email = html_nodes(.x, ".grpl-contact a") %>%
html_text() %>%
{if(length(.) == 0) NA else .}))
library('rvest')
library('dplyr')
library('httr')
library('purrr')
url <- 'https://uws-community.symplicity.com/index.php?s=student_group'
page <- html_session(url)
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
df <- df %>% mutate(id = row_number())
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
View(df)
url <- 'https://uws-community.symplicity.com/index.php?s=student_group'
page <- html_session(url)
count <- 0
get_table <- function(page) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
df <- df %>% mutate(id = row_number())
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"))))
count <- count + 1
} else{
return (df)
}
}
df <- get_table(page)
get_table <- function(page) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
df <- df %>% mutate(id = row_number())
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
if(count != 43) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"))))
count <- count + 1
} else{
return (df)
}
}
df <- get_table(page)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
df <- df %>% mutate(id = row_number())
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo src") %>% html_text()
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-status-ind grpl-status-ind- clearfix") %>% html_text()
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-status-ind grpl-status-ind- clearfix") %>% html_text()
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 1) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-status-ind grpl-status-ind- clearfix img") %>% html_text()
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 1) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_text()
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 1) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
df[1, logo]
View(df)
df[1, "logo"]
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img src") %>% html_text()
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 1) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src") %>%  html_text()
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 1) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src") %>%  html_text()
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo") %>% html_attr("src") %>%  html_text()
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 1) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 1) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node("grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
df <- get_table(page, 0)
View(df)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
getwd()
setwd("D:/GithubRepos/RSODirectory/datascrape")
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
