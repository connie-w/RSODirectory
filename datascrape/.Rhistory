sub_page <- page %>% follow_link(css = ".grpl-moreinfo a")
df$fb <- html_node(sub_page, xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
View(df)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
View(df)
View(RSO_data)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
View(RSO_data)
View(df)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
?sapply
?mapply
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
?mapply
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- paste0("https://uws-community.symplicity.com/", more_info_nodes)
position <- 1:nrow(df)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
lapply(position, get_more_info)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
View(df)
get_more_info <- function(df) {
page <- follow_link(page, css = ".grpl-moreinfo a")
fb <- html_node(sub_page, xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
page <- page %>% back()
fb
}
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- paste0("https://uws-community.symplicity.com/", more_info_nodes)
df$fb <- sapply(df$more_info, get_more_info)
View(df)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
url <- 'https://uws-community.symplicity.com/index.php?s=student_group'
page <- html_session(url)
get_more_info <- function(position) {
page <- follow_link(page, css = paste0(".grpl-moreinfo > a:nth-child(" , position , ")"))
fb <- html_node(sub_page, xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
page <- page %>% back()
fb
}
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
library('rvest')
library('dplyr')
library('httr')
url <- 'https://uws-community.symplicity.com/index.php?s=student_group'
page <- html_session(url)
get_more_info <- function(position) {
page <- follow_link(page, css = paste0(".grpl-moreinfo > a:nth-child(" , position , ")"))
fb <- html_node(sub_page, xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
page <- page %>% back()
fb
}
get_table <- function(page, count) {
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
id_nodes <- html_nodes(page, "grpl-grp clearfix id") %>% html_text()
df$id <- id_nodes
df$fb <- lapply(1:nrow(df), get_more_info)
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
}
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
id_nodes <- html_nodes(page, "grpl-grp clearfix id") %>% html_text()
df$id <- id_nodes
View(df)
id_nodes <- html_nodes(page, "div.grpl-grp clearfix id") %>% html_text()
df$id <- id_nodes
id_nodes <- html_nodes(page, "div.grpl-grp id") %>% html_text()
df$id <- id_nodes
id_nodes <- html_nodes(page, "div.grpl-grp > id") %>% html_text()
df$id <- id_nodes
id_nodes <- html_nodes(page, "div.grpl-grp id:last-child") %>% html_text()
df$id <- id_nodes
id_nodes <- html_nodes(page, "div.grpl-grp clearfix id:last-child") %>% html_text()
df$id <- id_nodes
id_nodes <- html_nodes(page, "div.grpl-grp clearfix") %>% html_attrs("id")
df$id <- id_nodes
id_nodes <- html_nodes(page, "div.grpl-grp.clearfix") %>% html_attr("id")
df$id <- id_nodes
View(df)
html_attrs()
?mapply
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
df$fb <- mapply(df$more_info, get_more_info, MoreArgs = page)
?mapply
df$fb <- mapply(get_more_info, df$more_info, MoreArgs = page)
fb <- html_node(jump_to(page, df), xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
df$fb <- mapply(get_more_info, df$more_info, page)
get_more_info <- function(more_info, page) {
fb <- html_node(jump_to(page, more_info), xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
page <- page %>% back()
fb
}
df$fb <- mapply(get_more_info, df$more_info, page)
jump_to(page, df[[1, more_info]])
jump_to(page, df[[1, "more_info"]])
test <- get_more_info(df[[1, "more_info"]], page)
?session_history
fb <- html_node(jump_to(page, more_info), xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
df$fb <- mapply(get_more_info, df$more_info, page)
df$fb <- mapply(get_more_info, df$more_info, page)
page <- html_session(url)
df$fb <- mapply(get_more_info, df$more_info, page)
test <- get_more_info(df[[1, "more_info"]], page)
test <- get_more_info(df[[1, "more_info"]], page)
get_more_info <- function(more_info, page) {
fb <- html_node(jump_to(page, more_info), xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
}
test <- get_more_info(df[[1, "more_info"]], page)
test
test <- get_more_info(df[[2, "more_info"]], page)
df$fb <- mapply(get_more_info, df$more_info, page)
df$fb <- lapply(get_more_info, df$more_info, page)
df$fb <- mapply(get_more_info, df$more_info, page)
?lapply
df$fb <- html_node(jump_to(page, df$more_info), xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
df$fb <- lapply(df$more_info, get_more_info, page)
View(df)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
page
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
View(RSO_data)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
View(df)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
df$fb <- lapply(df$more_info, get_more_info, page)
if(count != 44) {
return (rbind(df, get_table(page %>% follow_link(css = ".paging_nav a:last-child"), count + 1)))
} else{
return (df)
}
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
df$fb <- lapply(df$more_info, get_more_info, page)
page <- page %>% follow_link(css = ".paging_nav a:last-child")
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
View(df)
library('rvest')
library('dplyr')
library('httr')
url <- 'https://uws-community.symplicity.com/index.php?s=student_group'
page <- html_session(url)
get_more_info <- function(more_info, page) {
page <- jump_to(page, more_info)
fb <- html_node(page, xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
page <- back(page)
}
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$emails<-email_nodes
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
df$fb <- lapply(df$more_info, get_more_info, page)
View(df)
get_more_info <- function(more_info, page) {
fb <- html_node(jump_to(page, more_info), xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
}
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
df$fb <- lapply(df$more_info, get_more_info, page)
View(df)
page <- page %>% follow_link(css = ".paging_nav a:last-child")
View(df)
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
View(df)
library('rvest')
library('dplyr')
library('httr')
url <- 'https://uws-community.symplicity.com/index.php?s=student_group'
page <- html_session(url)
get_more_info <- function(more_info, page) {
fb <- html_node(jump_to(page, more_info), xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
}
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
View(df)
page <- page %>% follow_link(css = ".paging_nav a:last-child")
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
library('rvest')
library('dplyr')
library('httr')
url <- 'https://uws-community.symplicity.com/index.php?s=student_group'
page <- html_session(url)
get_more_info <- function(more_info, page) {
fb <- html_node(jump_to(page, more_info), xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
}
temp_session <- page
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
df$fb <- lapply(df$more_info, get_more_info, page)
page <- temp_session %>% follow_link(css = ".paging_nav a:last-child")
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
df$fb <- lapply(df$more_info, get_more_info, page)
View(df)
View(df)
library('rvest')
library('dplyr')
library('httr')
url <- 'https://uws-community.symplicity.com/index.php?s=student_group'
page <- html_session(url)
get_more_info <- function(more_info, page) {
fb <- html_node(jump_to(page, more_info), xpath = '//*[@id="dnf_class_values_student_group__facebook__widget"]') %>% html_text()
jump_to(page, "?mode=list")
fb
}
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
df$fb <- lapply(df$more_info, get_more_info, page)
View(df)
page <- page %>% follow_link(css = ".paging_nav a:last-child")
#find group names
name_text <- html_nodes(page,".grpl-name a") %>% html_text()
df <- data.frame(name_text, stringsAsFactors = FALSE)
#find text description
desc_text <- html_nodes(page, ".grpl-purpose") %>% html_text()
df$desc_text <- trimws(desc_text)
#find emails
#  find the parent nodes with html_nodes
#  then find the contact information from each parent using html_node
email_nodes<-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-contact a") %>% html_text()
df$emails<-email_nodes
category_nodes <- html_nodes(page, "div.grpl-grp") %>% html_node(".grpl-type") %>% html_text()
df$category<-category_nodes
pic_nodes <-html_nodes(page, "div.grpl-grp") %>% html_node( ".grpl-logo img") %>% html_attr("src")
df$logo <- paste0("https://uws-community.symplicity.com/", pic_nodes)
more_info_nodes <- html_nodes(page, ".grpl-moreinfo a") %>% html_attr("href")
df$more_info <- more_info_nodes
df$fb <- lapply(df$more_info, get_more_info, page)
source('D:/GithubRepos/RSODirectory/datascrape/rso-datascrape.R', echo=TRUE)
View(RSO_data)
View(RSO_data)
typeof(RSO_data)
write.csv(unlist(RSO_data), file = "rso-data.csv")
getwd()
setwd("D:/GithubRepos/RSODirectory/datascrape")
write.csv(unlist(RSO_data), file = "rso-data.csv")
